# ⚠️ 開発中・自己責任・無保証 ⚠️

このソフトウェアは開発段階です。使用は自己責任で行ってください。作者は一切の責任を負いません。

---

## 免責事項・利用規約

**本ソフトウェアの使用により、以下の条項に同意したものとみなされます。**

### 完全免責
- **作者は一切の責任を負いません**
- **保証は一切ありません**
- **サポートは提供しません**
- **使用は完全に自己責任です**

### 損害について
作者は以下の損害について一切責任を負いません：
- PCの故障・不具合
- RimWorld本体の破損
- セーブデータの消失
- MODファイルの破損
- その他あらゆる損害

### 禁止事項
- 無断再配布
- 無断改変
- 商用利用
- 作者への問い合わせ・クレーム

### 使用条件
- バックアップは必ず取ること
- 問題が発生しても作者に連絡しないこと
- 自己責任で使用すること

---

# RimWorld MOD 日本語化インストーラー

## 概要

RimWorldのMODに日本語翻訳ファイルを自動的に導入・管理する包括的なツールです。個別MODの日本語化から一括適用、翻訳更新の自動チェックまで、RimWorldの日本語化を効率的にサポートします。

## 🎯 主要機能

### 1. 個別MOD日本語化導入
- **URL入力による自動インストール**: Steam WorkshopやMOD配布サイトのURLを貼り付けるだけで、自動的に日本語化ファイルをダウンロード・適用
- **MOD ID自動抽出**: URLからMOD IDを自動的に抽出し、適切な処理を実行
- **Japaneseフォルダ自動検出**: ダウンロードしたアーカイブからJapaneseフォルダを自動検出・配置
- **既存ファイルの安全な置き換え**: 既存の日本語化ファイルを適切にバックアップしてから新しいファイルを適用

### 2. 一括日本語化システム
- **翻訳リスト自動取得**: `rimworld.2game.info`から翻訳可能なMODの一覧を自動取得
- **CSV形式での管理**: 翻訳リストをCSVファイルで管理し、効率的な検索・適用を実現
- **インストール済みMODとの照合**: 現在インストールされているMODと翻訳リストを照合し、適用可能な翻訳を自動検出
- **一括適用機能**: 検出された翻訳ファイルを一括でダウンロード・適用

### 3. 翻訳更新管理
- **最新翻訳チェック**: ウェブサイトの最新投稿をチェックし、新しい翻訳ファイルを自動検出
- **差分更新**: 既存のCSVファイルに新しい翻訳のみを追加（効率的な更新）
- **適用状況追跡**: どの翻訳ファイルが適用済みかを記録し、重複適用を防止

### 4. MODバックアップ機能
- **差分バックアップ**: 新規・更新分のみをバックアップ（ストレージ効率化）
- **自動バックアップ**: 日本語化適用前に既存ファイルを自動バックアップ
- **バックアップ管理**: 古いバックアップファイルの整理・管理

### 5. フォルダ管理機能
- **ワークショップMODフォルダ**: Steam WorkshopのMODフォルダを直接開く
- **ローカルMODフォルダ**: ローカルMODフォルダを直接開く
- **バックアップフォルダ**: バックアップファイルの管理フォルダを開く

## 🚀 使い方

### 基本的な使用手順

#### 1. 個別MOD日本語化
1. MODのURLをコピー（Steam Workshop、GitHub等）
2. 上部の入力欄にURLを貼り付け
3. 「実行」ボタンを押すかEnterキーを押す
4. 自動的にダウンロード・適用が完了

#### 2. 一括日本語化（推奨）
1. **「📥 全ページ取得」ボタン**: 翻訳リストを新規作成
2. **「更新チェック」ボタン**: 既存リストを最新状態に更新
3. **「一括日本語化適用」ボタン**: 適用可能な翻訳を一括適用

#### 3. MODバックアップ
1. 「MODバックアップ」ボタンを押す
2. 差分のみバックアップされる（効率的）

#### 4. フォルダ管理
- **「ワークショップMOD」**: Steam WorkshopのMODフォルダを開く
- **「ローカルMOD」**: ローカルMODフォルダを開く
- **「バックアップ」**: バックアップフォルダを開く

## 🔧 技術的特徴

### エラーハンドリング
- ネットワークエラー、ファイルアクセスエラー、アーカイブ展開エラーなどに対する包括的なエラーハンドリング
- ユーザーフレンドリーなエラーメッセージとリトライ機能

### 進捗管理
- リアルタイムの進捗表示
- 処理状況の詳細なログ記録
- 非同期処理によるUIの応答性維持

### ファイル管理
- 一時ファイルの自動クリーンアップ
- 安全なファイル操作（既存ファイルの保護）
- 文字コード自動検出（UTF-8、Shift_JIS等）

## 📊 データ管理

### 翻訳リスト（CSV）
- File ID、MOD ID、MOD名、更新日時、日本語ファイルアップロード日時、ファイルサイズを管理
- ページ番号による効率的なデータ取得
- 重複排除と最新データ優先

### 適用状況管理（JSON）
- 適用済みFile IDの記録
- 適用日時の記録
- MOD種別（Workshop/Local）の記録

## 🎮 RimWorld統合

### MOD検出
- Steam Workshop MODの自動検出
- ローカルMODの自動検出
- MOD名の自動取得（About.xmlから）

### ファイル構造対応
- RimWorldの標準的なMOD構造に対応
- `Languages/Japanese/`フォルダへの適切な配置
- 既存の言語ファイルとの競合回避

## ⚠️ 安全機能

### バックアップシステム
- 処理前の自動バックアップ
- 復元可能な状態の維持
- バックアップファイルの整理

### 検証機能
- ダウンロードファイルの整合性チェック
- アーカイブ形式の検証
- Japaneseフォルダの存在確認

## 📁 ファイル構成

```
RimWorldJapanizer/
├── Main.py                    # メインGUIアプリケーション
├── auto_japanizer.py          # 一括日本語化機能
├── translation_scraper.py     # 翻訳リスト取得機能
├── translation_checker.py     # 翻訳更新チェック機能
├── downloader.py              # ファイルダウンロード機能
├── backup_manager.py          # バックアップ管理機能
├── utils.py                   # ユーティリティ関数
├── config.py                  # 設定ファイル
└── pages.py                   # 外部ページ表示機能
```

## 📝 ログファイル

- **ログ保存先**: `logs`フォルダ
- **自動ログ記録**: 全ての処理が詳細にログ記録される
- **ログファイル名**: 日時付きで管理（例: `auto_japanizer_20231201_143022.log`）

## ⚙️ 設定

### パス設定（config.py）
- **MODS_DIR**: Steam Workshop MODフォルダ
- **LOCAL_MODS_DIR**: ローカルMODフォルダ
- **BACKUP_ROOT**: バックアップ保存先
- **LOGS_DIR**: ログ保存先

### カスタマイズ
- 設定ファイルを編集してパスを変更可能
- タイムアウト設定、チャンクサイズ等の調整可能

## 🆘 トラブルシューティング

### よくある問題
1. **MODが見つからない**: Steam WorkshopでMODをサブスクライブしてから再試行
2. **ダウンロードエラー**: ネットワーク接続を確認
3. **Japaneseフォルダが見つからない**: 翻訳ファイルが含まれていない可能性

### ログの確認
- エラーが発生した場合は`logs`フォルダのログファイルを確認
- 詳細なエラー情報が記録されている

## 📋 注意事項

- **バックアップは必ず取ること**
- **ログは`logs`フォルダに保存される**
- **問題が発生しても作者に連絡しないこと**
- **MODの更新後は翻訳も再適用が必要な場合がある**

## 🔄 更新履歴

- 一括日本語化機能の追加
- 翻訳更新チェック機能の追加
- バックアップ機能の改善
- エラーハンドリングの強化
- UI/UXの改善

---

**このツールは、RimWorldのMOD日本語化を効率的かつ安全に実行するための包括的なソリューションです。**